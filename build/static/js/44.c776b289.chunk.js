(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[44],{1062:function(e,t,a){"use strict";a.r(t);var c=a(12),s=a(26),n=a(27),d=a(29),i=a(30),l=a(1),h=a(215),r=a(736),j=a(743),o=a.n(j),b=(a(744),a(738)),O=a.n(b),m=function(e){Object(d.a)(a,e);var t=Object(i.a)(a);function a(e){var c;return Object(s.a)(this,a),(c=t.call(this,e)).toggle=function(){c.setState({toggleName:!c.state.toggleName})},c._onInputChange=function(e){var t=e.target?e.target.value:e;console.log(t.diff(c.state.end_date,"days")),t.diff(c.state.end_date,"days")>0?c.setState({message:"Start date is always less than end date"}):(c.setState({start_date:t}),c.setState({message:""}),c.carmovementData())},c._onInputChangeEnd=function(e){var t=e.target?e.target.value:e;t.diff(c.state.start_date,"days")<0?c.setState({message:"Start date is always less than end date"}):(c.setState({message:""}),c.setState({end_date:t}),c.carmovementData())},c.state={start_date:O()().subtract(15,"days"),end_date:O()(),checkoutData:{},checkinData:{},check_in_total:0,message:"",check_out_total:0,check_out_pending:0,toggleName:!0,messages:""},c.carmovementData(),c}return Object(n.a)(a,[{key:"carmovementData",value:function(){var e=this,t=O()(this.state.start_date).format("YYYY-MM-DD"),a=O()(this.state.end_date).format("YYYY-MM-DD"),c={start_date:new Date(t+" 00:00:00").toJSON(),end_date:new Date(a+" 23:59:59").toJSON()};console.log(c);Object(r.a)(c,"booking/carmovement","").then((function(t){if(200==t.status){if(200===t.data.status){console.log(t.data.data);var a=t.data.data.check_in_total,c=t.data.data.check_out_total.checked_out,s=t.data.data.check_out_total.pending_check_out;e.setState({checkinData:t.data.data.check_in,checkoutData:t.data.data.check_out,check_in_total:a,check_out_total:c,check_out_pending:s})}}else 400===t.status&&e.setState({messages:t.msg})}))}},{key:"finalReport",value:function(e){var t=O()(this.state.start_date).format("YYYY-MM-DD"),a=O()(this.state.end_date).format("YYYY-MM-DD");this.state.toggleName,Object(r.a)({},"booking/downloadcarmovement?report_type="+e+"&start_date="+new Date(t+" 00:00:00").toJSON()+"&end_date="+new Date(a+" 23:59:59").toJSON(),"",2).then((function(e){if(200==e.status){console.log(e.data);var t=document.createElement("a"),a=e.data,c=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(c);t.href=s,t.setAttribute("download","carmovement.csv"),t.click()}}))}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:"dc-wrap car-movement-report",children:[Object(c.jsxs)("div",{className:"dc-header",children:[Object(c.jsxs)("div",{className:"dch-left",children:[Object(c.jsx)("h3",{className:"dc-head",children:"Car Movement Report"}),this.state.messages.length>0&&Object(c.jsx)("span",{className:"error",children:this.state.messages})]}),Object(c.jsx)("div",{className:"dch-right",children:Object(c.jsxs)("div",{className:"dch-date-fields",children:[Object(c.jsxs)("div",{className:"dch-d-from-to",children:[Object(c.jsx)("p",{className:"dch-d-head",children:"From"}),Object(c.jsx)(o.a,{dateFormat:!0,input:!0,value:this.state.start_date,onChange:this._onInputChange,timeFormat:!1})]}),Object(c.jsxs)("div",{className:"dch-d-from-to",children:[Object(c.jsx)("p",{className:"dch-d-head",children:"To"}),Object(c.jsx)(o.a,{dateFormat:!0,input:!0,startDate:this.state.start_date,value:this.state.end_date,onChange:this._onInputChangeEnd,timeFormat:!1})]})]})})]}),this.state.message.length>0?Object(c.jsx)("span",{class:"error",style:{float:"right"},children:this.state.message}):"",Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"dc-body",children:[Object(c.jsx)("div",{className:"rr-wrap",children:Object(c.jsx)("div",{className:"rr-type",children:Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{onClick:this.toggle,className:this.state.toggleName?"active":"",children:[Object(c.jsx)("span",{}),"Check-In"]}),Object(c.jsxs)("li",{onClick:this.toggle,className:this.state.toggleName?"":"active",children:[Object(c.jsx)("span",{}),"Check-Out"]})]})})}),this.state.toggleName?Object(c.jsx)("div",{className:"rr-table check-in",children:Object(c.jsx)("div",{className:"dcb-table-responsive",children:Object(c.jsxs)("table",{className:"custom-table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"Car Type"})})}),Object(c.jsx)("th",{colspan:"4"}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"Check-In"})})})]})}),Object(c.jsx)("tbody",{children:Object.keys(this.state.checkinData).map((function(t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:t})}),Object(c.jsx)("td",{colspan:"4"}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:e.state.checkinData[t]})})]})}))}),Object(c.jsx)("tfoot",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"All"})})}),Object(c.jsx)("th",{colspan:"4"}),Object(c.jsx)("th",{onClick:function(){return e.finalReport("checkin")},children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("a",{class:"hover",children:this.state.check_in_total})})})]})})]})})}):Object(c.jsx)("div",{className:"rr-table check-out",children:Object(c.jsx)("div",{className:"dcb-table-responsive",children:Object(c.jsxs)("table",{className:"custom-table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"Car Type"})})}),Object(c.jsx)("th",{colspan:"3"}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"Check-Out"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"Pending Check-Out"})})})]})}),Object(c.jsx)("tbody",{children:Object.keys(this.state.checkoutData).map((function(t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:t})}),Object(c.jsx)("td",{colspan:"3"}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:e.state.checkoutData[t].checked_out})}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:e.state.checkoutData[t].pending_check_out})})]})}))}),Object(c.jsx)("tfoot",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("p",{children:"All"})})}),Object(c.jsx)("th",{colspan:"3"}),Object(c.jsx)("th",{onClick:function(){return e.finalReport("checkout")},children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("a",{class:"hover",children:this.state.check_out_total})})}),Object(c.jsx)("th",{onClick:function(){return e.finalReport("pending")},children:Object(c.jsx)("div",{className:"ct-head",children:Object(c.jsx)("a",{class:"hover",children:this.state.check_out_pending})})})]})})]})})})]})]})}}]),a}(l.Component);t.default=Object(h.b)((function(e){return console.log(e.loginDetails),e}))(m)}}]);
//# sourceMappingURL=44.c776b289.chunk.js.map