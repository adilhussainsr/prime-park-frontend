(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[25],{1063:function(t,e,a){"use strict";a.r(e);var s=a(12),c=a(26),n=a(27),i=a(60),d=a(29),o=a(30),r=a(1),l=a(215),u=(a(740),a(736)),h=a(743),g=a.n(h),j=(a(744),a(805)),b=a.n(j),m=a(738),O=a.n(m),p=a(1011),x=a.n(p),v=function(t){Object(d.a)(a,t);var e=Object(o.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t))._onInputChange=function(t){var e=t.target?t.target.value:t;e>s.state.end_date?s.setState({message:"Start date is always less than end date"}):(s.setState({start_date:e}),s.setState({message:""}),s.setState({activePageNo:1}),s.accounts(s.state.activePageNo))},s._onSelectChange=function(t,e){s.setState({isLoaded:!1});var a=t.target?t.target.value:t;if(parseInt(s.state.user_id)!==parseInt(a)||!1===s.state.is_admin)return s.setState({isLoaded:!0}),alert("You cannot assign to other user!"),!1;var c={assigned_to:a,id:e.id,status:"Accepted"};Object(u.a)(c,"/booking/assignuser","",1).then((function(t){200===t.status&&(200===t.data.status?(console.log(t.data.data),s.setState({isLoaded:!0}),s.accounts(s.state.activePageNo)):(s.setState({message:t.msg}),s.setState({isLoaded:!0}),setTimeout((function(){return s.setState({message:""})}),2e3)))}))},s._onClickAccept=function(t,e){s.setState({isLoaded:!1});t.target&&t.target.value;var a={assigned_to:localStorage.getItem("user_id"),id:e.id,status:"Accepted"};Object(u.a)(a,"/booking/assignuser","",1).then((function(t){200===t.status&&(200===t.data.status?(console.log(t.data.data),s.setState({isLoaded:!0}),s.accounts(s.state.activePageNo)):(s.setState({message:t.msg}),s.setState({isLoaded:!0}),setTimeout((function(){return s.setState({message:""})}),2e3)))}))},s._onClickNotReady=function(t,e){s.setState({isLoaded:!1});t.target&&t.target.value;var a={id:e.id,status:"Accepted"};Object(u.a)(a,"/booking/assignuser","",1).then((function(t){200===t.status&&(200===t.data.status?(console.log(t.data.data),s.setState({isLoaded:!0}),s.accounts(s.state.activePageNo)):(s.setState({message:t.msg}),s.setState({isLoaded:!0}),setTimeout((function(){return s.setState({message:""})}),2e3)))}))},s._onClickReject=function(t,e){s.setState({isLoaded:!1});t.target&&t.target.value;var a={id:e.id,assigned_to:1,status:"Pending"};Object(u.a)(a,"/booking/assignuser","",1).then((function(t){200===t.status&&(200===t.data.status?(console.log(t.data.data),s.setState({isLoaded:!0}),s.accounts(s.state.activePageNo)):(s.setState({message:t.msg}),s.setState({isLoaded:!0}),setTimeout((function(){return s.setState({message:""})}),2e3)))}))},s._onClickReady=function(t,e){s.setState({isLoaded:!1});t.target&&t.target.value;var a={id:e.id,status:"Ready"};Object(u.a)(a,"/booking/assignuser","",1).then((function(t){200===t.status&&(200===t.data.status?(console.log(t.data.data),s.setState({isLoaded:!0}),s.accounts(s.state.activePageNo)):(s.setState({message:t.msg}),s.setState({isLoaded:!0}),setTimeout((function(){return s.setState({message:""})}),2e3)))}))},s._onInputChangeEnd=function(t){var e=t.target?t.target.value:t;e<s.state.end_date?s.setState({message:"Start date is always less than end date"}):(s.setState({end_date:e}),s.setState({message:""}),s.setState({activePageNo:1}),s.accounts(s.state.activePageNo))},s.state={modalAccess:!1,items:[],users:[],user_id:0,count:10,totalCount:0,pageRange:1,activePageNo:1,message:"",start_date:(new Date).setDate((new Date).getDate()-1),end_date:new Date},s._onSelectChange=s._onSelectChange.bind(Object(i.a)(s)),s}return Object(n.a)(a,[{key:"onChangeOptionsPlus",value:function(t){this.setState({modalAccess:t})}},{key:"componentDidMount",value:function(){this.accounts(this.state.activePageNo),this.setState({user_id:localStorage.getItem("user_id"),is_admin:localStorage.getItem("is_admin")}),console.log("is admin"),console.log(localStorage.getItem("is_admin"))}},{key:"handlePageChange",value:function(t){this.accounts(t)}},{key:"accounts",value:function(t){var e=this;this.setState({isLoaded:!1});var a=O()(this.state.start_date).format("YYYY-MM-DD"),s=O()(this.state.end_date).format("YYYY-MM-DD"),c={start_date:new Date(a+" 00:00:00").toJSON(),end_date:new Date(s+" 23:59:59").toJSON(),page:""+(t?parseInt(t):parseInt())};this.setState({activePageNo:t||this.state.activePageNo}),Object(u.a)(c,"/booking/","").then((function(t){200===t.status&&(200===t.data.status?(console.log(t.data.data),e.setState({isLoaded:!0,totalCount:t.data.data.count,pageRange:Math.ceil(t.data.data.count/10),items:t.data.data.booking,users:t.data.data.users}),console.log(e.state.count)):(e.setState({message:t.msg}),e.setState({isLoaded:!0,totalCount:0,items:[],pageRange:Math.ceil(0)}),setTimeout((function(){return e.setState({message:""})}),2e3)))}))}},{key:"showDataToUserOrNot",value:function(t){return"true"===this.state.is_admin||(parseInt(t.assigned_to)===parseInt(this.state.user_id)||"Pending"===t.status)}},{key:"render",value:function(){var t=this,e=this.state,a=(e.isLoaded,e.items),c=e.users;return Object(s.jsxs)("div",{class:"dc-wrap dashboard-car-status",children:[Object(s.jsxs)("div",{class:"dc-header",children:[Object(s.jsx)("div",{class:"dch-left",children:Object(s.jsx)("h3",{class:"dc-head",children:"Car Status"})}),Object(s.jsx)("div",{class:"dch-right",children:Object(s.jsxs)("div",{className:"dch-date-fields",children:[Object(s.jsxs)("div",{className:"dch-d-from-to",children:[Object(s.jsx)("p",{className:"dch-d-head",children:"From"}),Object(s.jsx)(g.a,{dateFormat:!0,input:!0,value:this.state.start_date,onChange:this._onInputChange,timeFormat:!1})]}),Object(s.jsxs)("div",{className:"dch-d-from-to",children:[Object(s.jsx)("p",{className:"dch-d-head",children:"To"}),Object(s.jsx)(g.a,{dateFormat:!0,input:!0,value:this.state.end_date,onChange:this._onInputChangeEnd,timeFormat:!1})]})]})})]}),this.state.message.length>0?Object(s.jsx)("span",{class:"error",style:{float:"right"},children:this.state.message}):"",Object(s.jsx)("br",{}),Object(s.jsxs)("div",{class:"dc-body",children:[Object(s.jsx)("div",{class:"dcb-table-responsive",children:Object(s.jsxs)("table",{class:"custom-table car-type-tbl last-center-tbl",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:Object(s.jsx)("div",{class:"ct-head",children:Object(s.jsx)("p",{children:"Customer's name"})})}),Object(s.jsx)("th",{children:Object(s.jsx)("div",{class:"ct-head",children:Object(s.jsx)("p",{children:"Reservation ID"})})}),Object(s.jsx)("th",{children:Object(s.jsx)("div",{class:"ct-head",children:Object(s.jsx)("p",{children:"Pick Up Time"})})}),Object(s.jsx)("th",{children:Object(s.jsx)("div",{class:"ct-head",children:Object(s.jsx)("p",{children:"Assigned to"})})}),Object(s.jsx)("th",{children:Object(s.jsx)("div",{class:"ct-head",children:Object(s.jsx)("p",{children:"Status"})})}),Object(s.jsx)("th",{children:Object(s.jsx)("div",{class:"ct-head",children:Object(s.jsx)("p",{children:"Action"})})})]})}),Object(s.jsx)("tbody",{children:a.length>0?a.map((function(e,a){return!0===t.showDataToUserOrNot(e)?Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:Object(s.jsx)("p",{children:e.customer_name})}),Object(s.jsx)("td",{children:Object(s.jsx)("p",{children:e.reservation_id})}),Object(s.jsx)("td",{children:Object(s.jsx)("p",{children:O()(e.pick_up_time).format("HH:mm")})}),Object(s.jsx)("td",{children:Object(s.jsx)("div",{class:"sc-input-wrap",children:Object(s.jsx)("div",{class:"sc-input",children:Object(s.jsxs)("div",{class:"sc-select-wrap",children:[Object(s.jsxs)("select",{class:"sc-custom-form",onChange:function(a){return t._onSelectChange(a,e)},value:e.assigned_to,children:[Object(s.jsx)("option",{value:"",children:"Select"}),c.length>0?c.map((function(t,e){return""!==t.name?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("option",{value:t.id,children:t.name})}):""})):""]}),Object(s.jsx)("span",{class:"ion-ios-arrow-down select-drop-icon"})]})})})}),Object(s.jsx)("td",{children:Object(s.jsx)("p",{children:Object(s.jsx)("span",{class:"car-status "+e.status,children:e.status})})}),Object(s.jsxs)("td",{children:["Pending"==e.status?Object(s.jsx)("div",{class:"car-action-wrap",children:Object(s.jsx)("span",{onClick:function(a){t._onClickAccept(a,e)},class:"car-action accept",children:"Accept"})}):"","Accepted"==e.status?Object(s.jsxs)("div",{class:"car-action-wrap",children:[Object(s.jsx)("span",{onClick:function(a){t._onClickReady(a,e)},class:"car-action mark-ready",children:"Mark Ready"}),Object(s.jsx)("span",{onClick:function(a){t._onClickReject(a,e)},class:"car-action reject",children:"Reject"})]}):"","Ready"==e.status?Object(s.jsx)("div",{class:"car-action-wrap",children:Object(s.jsx)("span",{onClick:function(a){t._onClickNotReady(a,e)},class:"car-action mark-not-ready",children:"Mark Not Ready"})}):""]})]})}):null})):""})]})}),Object(s.jsx)("div",{class:"custom-pagination",children:Object(s.jsx)(x.a,{pages:this.state.pageRange,activePage:this.state.activePageNo,itemsCountPerPage:this.state.count,totalItemsCount:this.state.totalCount,pageRangeDisplayed:this.state.pageRange,onChange:this.handlePageChange.bind(this),align:"center"})})]}),!1===this.state.isLoaded?Object(s.jsx)("div",{style:{display:"flex",marginTop:"20px",justifyContent:"space-between",position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:Object(s.jsx)(b.a,{name:"double-bounce",color:"steelblue",style:{width:100,height:100,textAlign:"center",margin:"auto"}})}):null]})}}]),a}(r.Component);e.default=Object(l.b)((function(t){return console.log(t.loginDetails),t}))(v)},740:function(t,e,a){"use strict";e.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAaCAYAAABGiCfwAAAABHNCSVQICAgIfAhkiAAAAgdJREFUSEu1lkFWGkEQhqsaFrrSG0Q2ibiRG2SYCxhP4CTgHk8AnkBdJ8TxBpwA+gYxG3hmIzlBZCW+B11Wt/bYM2FgBod5j/eY6er6+v+nuqYR3nEF995u6QlOUGEAiDWTiuiWBIXdfXmVTI3rsk7/eDWa4XUESSZi6AzpOKzKsR1aC6ZBaoYDRNxdulgN3KZ6WJEPOi43LDPobRXnP6r9Tm5YGoiAbuZb1NIJS1O8RMATy+Kxcbc6qOSCLQNxssAm10VTnop/rr2szDiYycasIAtojnxaC5YbNPRbLOHCgU1YmSmkpcrygr6N/EAAXLuq9Pu0NqfCigAxdDIDVbN7bSGsIBCQUMfdT7KXuqmLAimArz+r/dC1NKZsk6BYgWwaFMFM937E+2SvcyvJtWNR1enxRdb9Z2NjVA/dFqMDigZFypI7fhMgA2uOPA9ADKLGSfC3e9Dfc+Xr/+taF7ORVXX4QTuCOTvePisC9KqsLlngZ5s4+ZKLAr3C4h2a20ulDMA2Cl4AscXIv/i1quqS8fae35mvP9k7aQFpoMad9wXn2E49gzgT9QcUBJ1hc1jv8YSjLDBXUWPojxHhQ5Z5JobPI2hOSXPxa9kkXtlvUaLg+0d5a+PywnQO0xtfgHhpC4W4/AFJEqBUoKR7HItgbCMo7HAzOFylzuQrqVamY8GqZFnHnwEaoFtX1O6VLgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=25.be6c3846.chunk.js.map