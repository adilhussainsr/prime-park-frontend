(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[33],{1034:function(e,t,s){"use strict";s.r(t);var c=s(12),a=s(26),n=s(27),i=s(60),o=s(29),d=s(30),r=s(1),l=s(214),u=s(215),j=(s(740),s(736)),h=s(738),b=s.n(h),p=(s(845),s(846),s(557),s(847),s(64)),O=s.n(p),m=s(805),g=s.n(m),x=function(){O()(".btnsm").click()},v=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var c;return Object(a.a)(this,s),(c=t.call(this,e)).viewMoreFunc=function(){c.setState({activePageNo:c.state.activePageNo+1},(function(){c.accounts(c.state.activePageNo)}))},c.handleChange=function(e,t){c.assigUser(e,t)},c.handleChangeMarkReady=function(e,t){c.markCarReady(t)},c.handleChangeMarkNotReady=function(e,t){c.markCarNotReady(t)},c.handleChangeMarkRject=function(e,t){c.markCarReject(t)},c.showModal=function(){x()},c.hideModal=function(){x()},c.showModalForRecentTime=function(){console.log("showModalForRecentTime");var e=c.state.items,t=0,s=0,a=0;e.map((function(e,n){return t=b()().diff(b()(e.pick_up_time)),console.log(b()().diff(b()(e.pick_up_time))),s=Math.abs(t),a=s/1e3,a/=60,a=parseInt(a),console.log(a),e.reservation_id,c.showModal(),!1}))},c.snoozeNotification=function(){alert("snoozeNotification")},c.seeNotification=function(){alert("snoozeNotification")},c._onClickAccept=function(e,t){c.setState({isLoaded:!1});var s={assigned_to:localStorage.getItem("user_id"),id:t.id,status:"Accepted"};Object(j.a)(s,"/booking/assignuser","",1).then((function(e){200===e.status&&(200===e.data.status?(console.log(e.data.data),c.setState({isLoaded:!0}),c.accounts(c.state.activePageNo)):(c.setState({message:e.msg}),c.setState({isLoaded:!0}),setTimeout((function(){return c.setState({message:""})}),2e3)))}))},c.state={modalAccess:!1,items:[],users:[],activePageNo:0,adminUser:0,modalShow:!1},c.showNotification=c.showNotification.bind(Object(i.a)(c)),c}return Object(n.a)(s,[{key:"onChangeOptionsPlus",value:function(e){this.setState({modalAccess:e,modalAccessStatus:!1})}},{key:"componentDidMount",value:function(){var e=this;e.accounts(e.state.activePageNo),setTimeout((function(){e.accounts(e.state.activePageNo)}),6e4),"Notification"in window?Notification.requestPermission():alert("This browser does not support desktop notification")}},{key:"showNotification",value:function(){new Notification("Your  car is due id 198 !")}},{key:"accounts",value:function(e){var t=this;this.setState({isLoaded:!1});var s={page:""+(e?parseInt(e):0)};this.setState({activePageNo:e||this.state.activePageNo}),Object(j.a)(s,"/booking/"+s.page,"",2).then((function(e){if(200===e.status)if(setTimeout((function(){console.log(e)}),1e3),200===e.data.status){console.log(e.data.data);var s=localStorage.getItem("is_admin");t.setState({isLoaded:!0,items:e.data.data.booking,users:e.data.data.users,is_admin:s})}else t.setState({message:e.msg}),setTimeout((function(){return t.setState({message:""})}),2e3)}))}},{key:"assigUser",value:function(e,t){var s=this,c={id:t,assigned_to:e,status:"Accepted"};Object(j.a)(c,"/booking/assignuser","",1).then((function(e){200===e.status&&(200===e.data.status?(console.log(e.data.data),s.setState({isLoaded:!0}),s.accounts(s.state.activePageNo)):(s.setState({message:e.msg}),setTimeout((function(){return s.setState({message:""})}),2e3)))}))}},{key:"markCarReady",value:function(e){var t=this,s={id:e,status:"Ready"};Object(j.a)(s,"/booking/assignuser","",1).then((function(e){200===e.status&&(200===e.data.status?(console.log(e.data.data),t.setState({isLoaded:!0}),t.accounts(t.state.activePageNo)):(t.setState({message:e.msg}),setTimeout((function(){return t.setState({message:""})}),2e3)))}))}},{key:"markCarNotReady",value:function(e){var t=this,s={id:e,status:"Accepted"};Object(j.a)(s,"/booking/assignuser","",1).then((function(e){200===e.status&&(200===e.data.status?(console.log(e.data.data),t.setState({isLoaded:!0}),t.accounts(t.state.activePageNo)):(t.setState({message:e.msg}),setTimeout((function(){return t.setState({message:""})}),2e3)))}))}},{key:"markCarReject",value:function(e){var t=this,s={id:e,status:"Pending",assigned_to:1};Object(j.a)(s,"/booking/assignuser","",1).then((function(e){200===e.status&&(200===e.data.status?(console.log(e.data.data),t.setState({isLoaded:!0}),t.accounts(t.state.activePageNo)):(t.setState({message:e.msg}),setTimeout((function(){return t.setState({message:""})}),2e3)))}))}},{key:"render",value:function(){var e=this,t=this.state,s=(t.isLoaded,t.items),a=t.users;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"dashboard-wrapper",children:[Object(c.jsxs)("div",{className:this.state.modalAccess?"dashboard-center-popup active":"dashboard-center-popup",children:[Object(c.jsx)("div",{className:"dp-backdrop"}),Object(c.jsx)("div",{className:"dp-content",children:Object(c.jsx)("div",{className:"dp-body",children:Object(c.jsxs)("div",{className:"dp-popup cus-have-res",children:[Object(c.jsx)("div",{className:"popup-close",children:Object(c.jsx)("span",{className:"ion-close-round",onClick:function(){return e.onChangeOptionsPlus(!1)}})}),Object(c.jsx)("h4",{className:"popup-title",children:"Does the Customer have a reservation?"}),Object(c.jsxs)("div",{className:"popup-action",children:[Object(c.jsxs)(l.c,{to:"/checkout/vendors",children:[" ",Object(c.jsx)("button",{type:"button",className:"pp-custom-btn",children:"Yes"})]}),Object(c.jsxs)(l.c,{to:"/checkout/plate_name/0",children:[" ",Object(c.jsx)("button",{type:"button",className:"pp-custom-btn pp-btn-outline",children:"No"})]})]})]})})})]}),Object(c.jsxs)("div",{className:this.state.modalAccessStatus?"dashboard-center-popup active":"dashboard-center-popup",children:[Object(c.jsx)("div",{className:"dp-backdrop"}),Object(c.jsx)("div",{className:"dp-content",children:Object(c.jsx)("div",{className:"dp-body",children:Object(c.jsxs)("div",{class:"dp-popup del-ven-name",children:[Object(c.jsx)("div",{class:"popup-close",children:Object(c.jsx)("span",{class:"ion-close-round",onClick:function(){return e.onChangeOptionsPlus(!1)}})}),Object(c.jsxs)("h4",{class:"popup-title",children:["Do you want to delete? ",Object(c.jsx)("span",{children:"User Name"})]}),Object(c.jsxs)("div",{class:"popup-action",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return e.deleteSubadmin()},class:"pp-custom-btn",children:"Yes"}),Object(c.jsx)("button",{type:"button",onClick:function(){return e.onChangeOptionsPlus(!1)},class:"pp-custom-btn pp-btn-outline",children:"No"})]})]})})})]})]}),Object(c.jsxs)("div",{class:"dc-wrap main-dashboard dashboard-car-status",children:[Object(c.jsxs)("div",{class:"dc-header",children:[Object(c.jsx)("div",{class:"dch-left",children:Object(c.jsx)("h3",{class:"dc-head",children:"Car Status"})}),Object(c.jsxs)("div",{class:"dch-right",children:[Object(c.jsx)("button",{type:"button",className:"pp-custom-btn",onClick:function(){return e.onChangeOptionsPlus(!0)},children:"Check In"}),Object(c.jsxs)(l.c,{to:"/checkout/search",children:[" ",Object(c.jsx)("button",{type:"button",className:"pp-custom-btn",children:"Check-Out"})]}),Object(c.jsx)(l.c,{to:"/checkout/modify",children:Object(c.jsx)("button",{type:"button",className:"pp-custom-btn ",children:"Modify and search"})}),Object(c.jsx)(l.c,{to:"/car_status/list",children:Object(c.jsx)("button",{type:"button",class:"pp-custom-btn",children:"Car Status"})})]})]}),Object(c.jsxs)("div",{class:"dc-body",children:[Object(c.jsx)("div",{class:"dcb-table-responsive",children:Object(c.jsxs)("table",{class:"custom-table car-type-tbl last-center-tbl",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Customer's name"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Phone Number"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Ticket Id"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Slot"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Reservation ID"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Pick Up Time"})})}),"true"===this.state.is_admin?Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Assigned to"})})}):"",Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Status"})})}),Object(c.jsx)("th",{children:Object(c.jsx)("div",{class:"ct-head",children:Object(c.jsx)("p",{children:"Action"})})})]})}),Object(c.jsx)("tbody",{children:s.length>0?s.map((function(t,s){var n;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:t.customer_name})}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:t.mobile_number})}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:t.id})}),Object(c.jsx)("td",{className:"no-line-break",children:(null===t||void 0===t||null===(n=t.parking)||void 0===n?void 0:n.slot)||"-"}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:t.reservation_id})}),Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:b()(t.pick_up_time).format("MMM D HH:mm")})}),"true"===e.state.is_admin?Object(c.jsx)("td",{children:Object(c.jsx)("div",{class:"sc-input-wrap",children:Object(c.jsx)("div",{class:"sc-input",children:Object(c.jsxs)("div",{class:"sc-select-wrap",children:[Object(c.jsxs)("select",{class:"sc-custom-form",value:t.assigned_to,onChange:function(s){return e.handleChange(s.target.value,t.id)},children:[Object(c.jsx)("option",{value:"",children:"Select"}),a.length>0?a.map((function(e,t){return""!==e.name?Object(c.jsx)("option",{value:e.id,children:e.name}):null})):""]}),Object(c.jsx)("span",{class:"ion-ios-arrow-down select-drop-icon"})]},1235)})})}):"",Object(c.jsx)("td",{children:Object(c.jsx)("p",{children:Object(c.jsx)("span",{class:"car-status "+t.status,children:t.status})})}),Object(c.jsxs)("td",{children:["Pending"===t.status?Object(c.jsx)("div",{class:"car-action-wrap",children:Object(c.jsx)("span",{onClick:function(s){return e._onClickAccept(s.target,t)},class:"car-action accept",children:"Accept"})}):"","Accepted"===t.status?Object(c.jsxs)("div",{class:"car-action-wrap",children:[Object(c.jsx)("span",{onClick:function(s){return e.handleChangeMarkReady(s.target,t.id)},class:"car-action mark-ready",children:"Mark Ready"}),Object(c.jsx)("span",{onClick:function(s){return e.handleChangeMarkRject(s.target,t.id)},class:"car-action reject",children:"Reject"})]}):"","Ready"===t.status?Object(c.jsx)("div",{class:"car-action-wrap",children:Object(c.jsx)("span",{onClick:function(s){return e.handleChangeMarkNotReady(s.target,t.id)},class:"car-action mark-not-ready",children:"Mark Not Ready"})}):""]})]})})):""})]})}),Object(c.jsx)(l.c,{to:"/dashboard",onClick:this.viewMoreFunc,children:Object(c.jsx)("div",{class:"view-more-data",children:"View More"})})]}),!1===this.state.isLoaded?Object(c.jsx)("div",{style:{display:"flex",marginTop:"20px",justifyContent:"space-between",position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:Object(c.jsx)(g.a,{name:"double-bounce",color:"steelblue",style:{width:100,height:100,textAlign:"center",margin:"auto"}})}):null]})]})}}]),s}(r.Component);t.default=Object(u.b)((function(e){return console.log(e.loginDetails),e}))(v)},740:function(e,t,s){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAaCAYAAABGiCfwAAAABHNCSVQICAgIfAhkiAAAAgdJREFUSEu1lkFWGkEQhqsaFrrSG0Q2ibiRG2SYCxhP4CTgHk8AnkBdJ8TxBpwA+gYxG3hmIzlBZCW+B11Wt/bYM2FgBod5j/eY6er6+v+nuqYR3nEF995u6QlOUGEAiDWTiuiWBIXdfXmVTI3rsk7/eDWa4XUESSZi6AzpOKzKsR1aC6ZBaoYDRNxdulgN3KZ6WJEPOi43LDPobRXnP6r9Tm5YGoiAbuZb1NIJS1O8RMATy+Kxcbc6qOSCLQNxssAm10VTnop/rr2szDiYycasIAtojnxaC5YbNPRbLOHCgU1YmSmkpcrygr6N/EAAXLuq9Pu0NqfCigAxdDIDVbN7bSGsIBCQUMfdT7KXuqmLAimArz+r/dC1NKZsk6BYgWwaFMFM937E+2SvcyvJtWNR1enxRdb9Z2NjVA/dFqMDigZFypI7fhMgA2uOPA9ADKLGSfC3e9Dfc+Xr/+taF7ORVXX4QTuCOTvePisC9KqsLlngZ5s4+ZKLAr3C4h2a20ulDMA2Cl4AscXIv/i1quqS8fae35mvP9k7aQFpoMad9wXn2E49gzgT9QcUBJ1hc1jv8YSjLDBXUWPojxHhQ5Z5JobPI2hOSXPxa9kkXtlvUaLg+0d5a+PywnQO0xtfgHhpC4W4/AFJEqBUoKR7HItgbCMo7HAzOFylzuQrqVamY8GqZFnHnwEaoFtX1O6VLgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=33.d83828c2.chunk.js.map