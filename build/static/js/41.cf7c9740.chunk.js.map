{"version":3,"sources":["views/checkout/review_checkin.js"],"names":["yester","moment","subtract","disablePast","current","isAfter","ReviewCheckin","props","_onInputChangeIn","e","value","target","setState","checkin","setTimeout","calculate","_onInputChangeOut","checkout","_onInputChangeTimein","timein","_onInputChangeTimeout","timeout","calculateDays","startTime","endTime","Date","setHours","setMinutes","setSeconds","Math","ceil","_handleKeyDown","key","submit","state","vendors","carTypes","booking_time","id","match","params","receiptData","booking","customer_name","onsite_amount","mobile_number","plate_number","reservation_id","passengers","payment_mode","overstay_charges","reservation_charges","days","overstay_days","car_type_id","reservation","vendor_id","slot","oldSlot","carType","disablePastDt","disablePastDts","errors","numberPassengers","saveDisabled","slotMessage","parking_lot_id","data","_callApi","then","response","status","types","d","receipt","parking","display_slot","pick_up_time","reservation_time","extra_passenger_charges","total_amount","yesterdays","yesterday","bind","onChange","getCarType","onSlotIdChange","timer","number","test","event","preventDefault","name","this","length","validMobileNumber","isDisabled","find","item","onsiteAmount","parseInt","extraPassengerCharge","vendor","parkingCharges","check_in","format","check_out","time_in","time_out","dateTime","dateTime1","reservationTime","bookingTime","pickupTime","val","msg","preBookingCharges","preBookingDays","dailyCharges","onsite_charges","regular_charges","calculated_charges","pre_booking_charges","pre_booking_days","parking_id","hours","clearTimeout","parkingLotId","success","is_checked_out","time","momentObj","console","log","toJSON","history","push","pathname","elements","i","isLoaded","class","type","onKeyDown","className","map","disabled","onsie_charge_applicable","createElements","dateFormat","input","open","isValidDate","timeFormat","onClick","onChangeEdit","readOnly","src","logo","hourly_overstay_charges","sign","Component","connect"],"mappings":"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","file":"static/js/41.cf7c9740.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { _callApi } from '../../Services/baseService';\nimport Datetime from 'react-datetime';\nimport \"react-datetime/css/react-datetime.css\";\nimport logo from '../../img/logo.png';\nimport moment from 'moment';\n\n\nconst defaultProps = {\n  initialPage: 1,\n  pageSize: 10\n}\nconst yester = moment().subtract(1, 'day');\n  const disablePast = current => {\n    return current.isAfter(yester);\n  };\nconst timeConvertCoef = 1000 * 60 * 60;\nconst maxFreePassengers = 4;\nconst chargesExtraPerPassenger = 10;\nconst twentyFour = 24;\nconst two = 2;\n\nclass ReviewCheckin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      vendors: [],\n      carTypes: [],\n      booking_time:'',\n      id: (this.props.match.params.id) ? this.props.match.params.id : '',\n      receiptData: {},\n      booking: {},\n      customer_name: '',\n      onsite_amount: '0',\n      mobile_number: '',\n      plate_number: '',\n      reservation_id: '',\n      passengers: 1,\n      payment_mode:'',\n      overstay_charges: 0,\n      reservation_charges: 0,\n      days: 0,\n      overstay_days: 0,\n      car_type_id: '',\n      reservation: 'Yes',\n      checkin: {},\n      checkout: {},\n      timein: {},\n      timeout: {},\n      vendor_id: '',\n      slot: '',\n      oldSlot: '',\n      carType: {},\n      disablePastDt:disablePast\n      ,disablePastDts:disablePast,\n      errors: {\n        customer_name: '',\n        onsite_amount: '',\n        mobile_number: '',\n        plate_number: '',\n        vendor_id: '',\n        reservation_id: '',\n        passengers: 1,\n        car_type_id: '',\n        reservation: '',\n        checkin: '',\n        checkout: '',\n       \n        timeout: '',\n      },\n      numberPassengers: 5,\n      saveDisabled: false,\n      slotMessage: {},\n      parking_lot_id: ''\n    }\n    var headerdata = \"\";\n    var data = {};\n    _callApi(data, '/cartype/', headerdata, 2)\n      .then((response) => {\n        if (response.status === 200) {\n          if (response.data.status === 200) {\n            this.setState({\n              carTypes: response.data.types\n            });\n          }\n        } else {\n\n\n        }\n\n      });\n    _callApi(data, '/vendor/', headerdata, 2)\n      .then((response) => {\n        if (response.status === 200) {\n          if (response.data.status === 200) {\n            this.setState({\n\n              vendors: response.data.vendors,\n            });\n          }\n          // console.log(response.data.users)\n        } else {\n\n\n        }\n\n      });\n\n    _callApi(data, 'booking/receipt/' + this.state.id, headerdata, 2)\n      .then((response) => {\n        if (response.status == 200) {\n          if (response.data.status === 200) {\n            var d = response.data.receipt;\n            // console.log(\"**********************************\")\n            // console.log(d)\n            this.setState({\n              receiptData: d,\n              customer_name: d.customer_name,\n              onsite_amount: d.onsite_amount,\n              mobile_number: d.mobile_number,\n              plate_number: d.plate_number,\n              reservation_id: d.reservation_id,\n              passengers: d.passengers,\n              id: d.id,\n              vendor_id: d.vendor_id,\n              slot: d.parking?d.parking.display_slot:null,\n              parking_lot_id: d.parking?d.parking.parking_lot_id:null,\n              oldSlot: d.parking?d.parking.display_slot:null,\n              car_type_id: d.car_type_id,\n              checkout: new Date(d.pick_up_time),\n              checkin: new Date(d.reservation_time),\n              extra_passenger_charges: d.extra_passenger_charges,\n              total_amount: d.total_amount,\n              overstay_charges: d.overstay_charges,\n              payment_mode:d.payment_mode,\n              days: d.days,\n              overstay_days: d.overstay_days,\n              timeout: new Date(d.pick_up_time),\n              reservation_charges: d.reservation_charges,\n              timein: new Date(d.reservation_time),\n              booking_time:new Date(d.booking_time)\n            })\n\n            const yesterdays = moment(new Date());\n      // console.log(yesterdays)\n       var disablePastDt = current => {\n         return current.isAfter(yesterdays);\n       };\n\n       const yesterday = moment(new Date(d.reservation_time)).subtract(1, 'day');;\n       // console.log(yesterday)\n        var disablePastDts = current => {\n          return current.isAfter(yesterday);\n        };\n       // console.log(disablePastDts)\n      this.setState({disablePastDt,disablePastDts})\n            if (d.reservation_id) {\n              this.setState({ reservation: 'Yes' })\n            } else {\n              this.setState({ reservation: 'No' })\n            }\n            // this.calculate();\n\n          }\n        }\n      })\n    this.submit = this.submit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.calculate = this.calculate.bind(this);\n    this.getCarType = this.getCarType.bind(this);\n    this.onSlotIdChange = this.onSlotIdChange.bind(this);\n    this.timer = null;\n  }\n  _onInputChangeIn = e => {\n\n    const value = e.target ? e.target.value : e;\n    // console.log(e)\n\n    this.setState({ checkin: value }, () => {\n      setTimeout(() => this.calculate(), 100);\n    })\n  }\n  _onInputChangeOut = e => {\n    const value = e.target ? e.target.value : e;\n    // console.log(e)\n    this.setState({ checkout: value }, () => {\n      setTimeout(() => this.calculate(), 100);\n    })\n  }\n  _onInputChangeTimein = e => {\n    const value = e.target ? e.target.value : e;\n    // console.log(e)\n    this.setState({ timein: value }, () => {\n      setTimeout(() => this.calculate(), 100);\n    })\n\n  }\n  _onInputChangeTimeout = e => {\n    const value = e.target ? e.target.value : e;\n    // console.log(value)\n    this.setState({ timeout: value }, () => {\n      setTimeout(() => this.calculate(), 100);\n    })\n\n  }\n\n  validMobileNumber(number){\n\n    var val = number;\n    if (/^\\d{10}$/.test(val)) {\n        // value is ok, use it\n        return false;\n    } else {\n       \n        \n        return true;\n    }\n  }\n  onChange(event) {\n    event.preventDefault();\n    const { name, value } = event.target;\n    let errors = this.state.errors;\n\n    switch (name) {\n\n      case 'customer_name':\n        errors.customer_name =\n          value.length < 2\n            ? 'Name is required'\n            : '';\n        break;\n      case 'plate_number':\n        errors.plate_number =\n          value.length < 2\n            ? 'Plate number is required'\n            : '';\n        break;\n      case 'reservation_id':\n        errors.reservation_id =\n          value.length < 2\n            ? 'Reservation id is required'\n            : '';\n        break;\n\n      case 'mobile_number':\n        errors.mobile_number =\n          value.length < 2 || this.validMobileNumber(value)\n            ? 'Valid Mobile number is required'\n            : '';\n        break; \n        case 'passengers':\n        errors.passengers =\n          value.length==0\n            ? 'Passenger is required'\n            : '';\n        break;\n\n    }\n    this.setState({ errors, [name]: value }, () => {\n      if(name==\"vendor_id\"){\n        this.setState({onsite_amount:0})\n      }\n      setTimeout(() => this.calculate(), 100);\n      this.setState({ errors });\n      if (errors.customer_name === \"\" && this.state.customer_name != \"\" && errors.onsite_amount === \"\" &&\n        errors.mobile_number === \"\" && this.state.mobile_number != \"\"\n        && errors.plate_number === \"\" && this.state.plate_number != \"\" && errors.reservation_id === \"\"\n      ) {\n        this.setState({ isDisabled: false });\n        // console.log(this.state.isDisabled)\n      }\n    })\n  }\n  getCarType() {\n\n\n    var headerdata = \"\";\n    var data = {};\n    var s = _callApi(data, 'cartype/' + this.state.car_type_id, headerdata, 2)\n      .then((response) => {\n        if (response.status == 200) {\n          if (response.data.status === 200) {\n            this.setState({ carType: response.data.carType });\n\n          } else {\n\n          }\n        } else {\n\n\n        }\n      });\n\n\n  }\n  calculate() {\n    var booking = this.state.receiptData;\n\n    const carType = this.state.carTypes.find(item => item.id == this.state.car_type_id);\n\n    let onsiteAmount = parseInt(this.state.onsite_amount) || 0;\n    let extraPassengerCharge = 0;\n    let overStayCharges = 0;\n    let overstayCharges = 0;\n    let overstayDays=0;\n    let vendor = null;\n    if (this.state.vendor_id) {\n      vendor = this.state.vendors.find(item => item.id == this.state.vendor_id);\n      // console.log(vendor)\n    }\n    let parkingCharges = 0;\n    let days = 0;\n    const { state } = this;\n    var check_in = moment(state.checkin).format('YYYY-MM-DD')\n    var check_out = moment(state.checkout).format('YYYY-MM-DD')\n    var time_in = moment(state.timein).format('HH:mm:ss')\n    var time_out = moment(state.timeout).format('HH:mm:ss')\n    var momentObj = moment(check_in + time_in, 'YYYY-MM-DDLT');\n    // console.log(momentObj)\n    var dateTime = momentObj.format('YYYY-MM-DD HH:mm:ss');\n    var momentObj1 = moment(check_out + time_out, 'YYYY-MM-DDLT');\n    var dateTime1 = momentObj1.format('YYYY-MM-DD HH:mm:ss');\n    let reservationTime = new Date(dateTime) || new Date();\n    let bookingTime =  null\n    let pickupTime = new Date(dateTime1);\n    if(booking.booking_time==null){\n      bookingTime =  null;\n    }else{\n      bookingTime = new Date(booking.booking_time);\n    }\n\n    if(!pickupTime) {\n      return {val: null, msg: 'Pick-up time is missing.'};\n  }\n  let preBookingDays = 0;\n\n  let preBookingCharges = 0;\n  let hours=0;\n  let dailyCharges = 0;\n\n  if(bookingTime && bookingTime < reservationTime) {\n      preBookingDays = this.calculateDays(bookingTime, reservationTime);\n  }\n\n  if(!vendor/* || (vendor && !vendor.onsie_charge_applicable)*/) {\n      dailyCharges = carType.regular_charges;\n  } else {\n      if(carType.onsite_charges) {\n          dailyCharges = carType.onsite_charges;\n      }\n  }\n  days = this.calculateDays(reservationTime, pickupTime);\n  if(days <= 0) {\n      return {val: null, msg: 'Invlid reservation and(or) pick-up time.'};\n  }\n  parkingCharges = days * dailyCharges;\n  preBookingCharges = preBookingDays * carType.regular_charges;\n\n\n    if(state.passengers > maxFreePassengers) {\n        extraPassengerCharge = (state.passengers - maxFreePassengers) * chargesExtraPerPassenger;\n    }\n    // console.log(state.passengers)\n    // console.log(extraPassengerCharge)\n\n    let parking = booking.parking\n    if(!parking) {\n        return {val: null, msg: 'Parking slot unavailable.'};\n    }\n\n\n    booking.extra_passenger_charges = extraPassengerCharge;\n    booking.calculated_charges = parkingCharges + overStayCharges;\n    booking.pre_booking_charges = preBookingCharges;\n    booking.pre_booking_days = preBookingDays;\n    booking.total_amount = parkingCharges + extraPassengerCharge + parseInt(onsiteAmount) + preBookingCharges;\n    booking.parking_id = parking.id;\n    booking.onsite_amount = onsiteAmount;\n    booking.passengers = this.state.passengers;\n    booking.carType = carType;\n    booking.vendor = vendor;\n    booking.days = days;\n    booking.payment_mode=this.state.payment_mode;\n    booking.overstay_charges = overstayCharges;\n    booking.overstay_days = overstayDays;\n    booking.hours=hours;\n    this.setState({ receiptData: booking })\n    // console.log(booking)\n  }\n\n  onSlotIdChange(event) {\n    this.setState({ slot: event.target.value, saveDisabled: true });\n\n    clearTimeout(this.timer);\n    if (event.target.value == this.state.oldSlot) {\n      return this.setState({ slotMessage: {}, saveDisabled: false });\n    }\n\n    // Set a new timer to update the state after 500ms\n    this.timer = setTimeout(() => {\n      _callApi({\n        params: {\n          slot: this.state.slot,\n          parkingLotId:this.state.parking_lot_id\n        }\n      }, 'parking/parkingSlotStatus', '', 2)\n      .then((response) => {\n        if (response.status == 200) {\n          if (response.data.status === 200) {\n            var slot = response.data.slot;\n            if (slot=='vacant') {\n              return this.setState({ slotMessage: {success: true, msg:'Slot is vacant'}, saveDisabled: false });\n            } else if (slot == 'occupied'){\n              return this.setState({ slotMessage: {success: false, msg:'Slot is Occupied'}, saveDisabled: true });\n            } else {\n              return this.setState({ slotMessage: {success: false, msg:'Invalid slot number'}, saveDisabled: true });\n            }\n          }}\n          return this.setState({ slotMessage: {success: false, msg:'Something went wrong'}, saveDisabled: true });\n      });\n    }, 1000);\n  }\n  \n  submit(event) {\n    event.preventDefault();\n    if(this.state.is_checked_out)\n    var value = this.state.time;\n    // console.log(value)\n    var data = {};\n    const { state } = this;\n    var check_in = moment(state.checkin).format('YYYY-MM-DD')\n    var check_out = moment(state.checkout).format('YYYY-MM-DD')\n    var time_in = moment(state.timein).format('HH:mm:ss')\n    var time_out = moment(state.timeout).format('HH:mm:ss')\n    var momentObj = moment(check_in + time_in, 'YYYY-MM-DDLT');\n    console.log(momentObj)\n    var dateTime = momentObj.format('YYYY-MM-DD HH:mm:ss');\n    var momentObj1 = moment(check_out + time_out, 'YYYY-MM-DDLT');\n    var dateTime1 = momentObj1.format('YYYY-MM-DD HH:mm:ss');\n\n    data = this.state.receiptData;\n    data.reservation_time=new Date(dateTime).toJSON();\n    data.pick_up_time= new Date(dateTime1).toJSON();\n    data.customer_name = this.state.customer_name;\n    data.mobile_number = this.state.mobile_number;\n    data.car_type_id = this.state.car_type_id;\n    data.reservation_id = this.state.reservation_id;\n    data.plate_number = this.state.plate_number;\n    data.passengers = this.state.passengers;\n    data.slot = this.state.slot;\n    data.oldSlot = this.state.oldSlot;\n\n\n\n\n    var headerdata = \"\";\n    var s = _callApi(data, 'booking/editbooking', headerdata, 3)\n      .then((response) => {\n        if (response.status == 200) {\n          if (response.data.status === 200) {\n            // console.log(response.data)\n            var self = this;\n            return self.props.history.push({\n              pathname: '/checkout/checkout_receipt/' + this.state.id,\n            })\n          }\n        }\n        // alert('failed to save');\n      })\n  }\n  calculateDays = (startTime, endTime) => {\n    if(!startTime) {\n        startTime = new Date();\n    } else {\n        startTime = new Date(startTime);\n    }\n\n    if(!endTime || endTime < startTime) {\n        return null;\n    }\n    endTime = new Date(endTime);\n\n    startTime.setHours(0);\n    startTime.setMinutes(0);\n    startTime.setSeconds(0);\n    endTime.setHours(0);\n    endTime.setMinutes(0);\n    endTime.setSeconds(0);\n\n    let days = Math.ceil((endTime - startTime) / (1000 * 60 * 60 * 24)) + 1;\n    return days;\n};\n  createElements(number) {\n    var elements = [];\n    for (var i = 1; i <= number; i++) {\n      elements.push(<option value={i}>{i} </option>);\n    }\n    return elements;\n  }\n  _handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.submit(e);\n    }\n  }\n  onChangeEdit(value) {\n\n    this.setState({ payment_mode: value }, () => {\n      setTimeout(() => this.calculate(), 100);\n    })\n}\n  render() {\n    var { isLoaded, carTypes, vendors, errors } = this.state;\n\n    return (\n\n\n      <div class=\"dc-wrap edit-plate-number\">\n        <div class=\"dc-header\">\n          <div class=\"dch-left\">\n            <h3 class=\"dc-head\">Plate Number</h3>\n          </div>\n          <div class=\"dch-right\">\n          </div>\n        </div>\n        <div class=\"dc-body\">\n          <div class=\"sc-input-wrap sc-one-by-two\">\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Customer's name</label>\n              <input type=\"text\" class=\"sc-custom-form\" name=\"customer_name\" onKeyDown={this._handleKeyDown} onChange={this.onChange} value={this.state.customer_name} />\n              {errors.customer_name.length > 0 &&\n                <span className='error'>{errors.customer_name}</span>}\n            </div>\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Mobile No.</label>\n              <input type=\"text\" class=\"sc-custom-form\" name=\"mobile_number\" onKeyDown={this._handleKeyDown} onChange={this.onChange} value={this.state.mobile_number} />\n              {errors.mobile_number.length > 0 &&\n                <span className='error'>{errors.mobile_number}</span>}\n            </div>\n          </div>\n          <div class=\"sc-input-wrap sc-one-by-two\">\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Car Type</label>\n              <div class=\"sc-select-wrap\">\n                <select class=\"sc-custom-form\" name=\"car_type_id\" value={this.state.car_type_id} onKeyDown={this._handleKeyDown} onChange={this.onChange} >\n\n                  <option value=\"\">Select</option>  {carTypes.length > 0 ?\n                    carTypes.map((carType, i) => (\n                      <option value={carType.id}>{carType.type}</option>\n\n                    )) : ''}\n                </select>\n                <span class=\"ion-ios-arrow-down select-drop-icon\"></span>\n              </div>\n              {errors.car_type_id.length > 0 &&\n                <span className='error'>{errors.car_type_id}</span>}\n            </div>\n\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Reservation Status</label>\n              <div class=\"sc-select-wrap\">\n                <select disabled={true} class=\"sc-custom-form\" name=\"reservation\" value={this.state.reservation} onKeyDown={this._handleKeyDown} onChange={this.onChange}  >\n                  <option value=\"Yes\">Yes</option>\n                  <option value=\"No\">No</option>\n                </select>\n                <span class=\"ion-ios-arrow-down select-drop-icon\"></span>\n              </div>\n            </div>\n          </div>\n          {(this.state.reservation_id==null || this.state.reservation_id==\"\")?\n            <div class=\"sc-input-wrap\">\n            \n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Plate Number</label>\n              <input type=\"text\" class=\"sc-custom-form\" value={this.state.plate_number} name=\"plate_number\" onKeyDown={this._handleKeyDown} onChange={this.onChange} />\n\n              {errors.plate_number.length > 0 &&\n                <span className='error'>{errors.plate_number}</span>}\n            </div>\n          </div>\n          :\n          <div class=\"sc-input-wrap sc-one-by-two\">\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Reservation ID</label>\n              <input type=\"text\" class=\"sc-custom-form\" name=\"reservation_id\" onKeyDown={this._handleKeyDown} onChange={this.onChange} value={this.state.reservation_id} />\n              {errors.reservation_id.length > 0 &&\n                <span className='error'>{errors.reservation_id}</span>}\n            </div>\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Plate Number</label>\n              <input type=\"text\" class=\"sc-custom-form\" value={this.state.plate_number} name=\"plate_number\" onKeyDown={this._handleKeyDown} onChange={this.onChange} />\n\n              {errors.plate_number.length > 0 &&\n                <span className='error'>{errors.plate_number}</span>}\n            </div>\n          </div>\n  }\n      {this.state.receiptData.reservation_id!==\"\"?\n     \n          <div class=\"sc-input-wrap sc-one-by-two\">\n        {this.state.receiptData.vendor && this.state.receiptData.vendor.onsie_charge_applicable==true ?\n              <div class=\"sc-input\">\n                <label class=\"sc-label\">Onsite Amount Paid</label>\n                <input type=\"text\" class=\"sc-custom-form\" value={this.state.onsite_amount} name=\"onsite_amount\" onKeyDown={this._handleKeyDown} onChange={this.onChange} />\n                {errors.onsite_amount.length > 0 &&\n                  <span className='error'>{errors.onsite_amount}</span>}\n              </div>\n              :''}\n        \n            <div class=\"sc-input\">\n              <label class=\"sc-label\">No. of Passengers</label>\n\n              <div class=\"sc-select-wrap\">\n                <select class=\"sc-custom-form\" value={this.state.passengers} name=\"passengers\" onKeyDown={this._handleKeyDown} onChange={this.onChange} >\n                  <option>Select</option>\n                  {this.createElements(10)}\n                </select>\n                <span class=\"ion-ios-arrow-down select-drop-icon\"></span>\n\n              </div>\n              <p class=\"sc-notice sc-error\">Additional Charges will apply on Passengers above 4.</p>\n              {errors.passengers.length > 0 &&\n                <span className='error'>{errors.passengers}</span>}\n            </div>\n          </div>\n                :  <div class=\"sc-input-wrap \">\n      \n                \n              <div class=\"sc-input\">\n                <label class=\"sc-label\">No. of Passengers</label>\n  \n                <div class=\"sc-select-wrap\">\n                  <select class=\"sc-custom-form\" value={this.state.passengers} name=\"passengers\" onKeyDown={this._handleKeyDown} onChange={this.onChange} >\n                    <option>Select</option>\n                    {this.createElements(10)}\n                  </select>\n                  <span class=\"ion-ios-arrow-down select-drop-icon\"></span>\n  \n                </div>\n                <p class=\"sc-notice sc-error\">Additional Charges will apply on Passengers above 4.</p>\n                {errors.passengers.length > 0 &&\n                  <span className='error'>{errors.passengers}</span>}\n              </div>\n            </div>}\n          {(this.state.vendor_id==null || this.state.vendor_id==\"\")?\n''\n          :\n          <>\n          <div class=\"sc-input-wrap sc-one-by-two\">\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Vendor Name</label>\n              <div class=\"sc-select-wrap\">\n                <select class=\"sc-custom-form\" value={this.state.vendor_id} name=\"vendor_id\" onKeyDown={this._handleKeyDown} onChange={this.onChange} >\n                  <option>Select</option>\n                  {vendors.length > 0 ?\n                    vendors.map((vendor, i) => (\n                      <option value={vendor.id}>{vendor.name}</option>\n\n                    )) : ''}\n                </select>\n                <span class=\"ion-ios-arrow-down select-drop-icon\"></span>\n                {errors.vendor_id.length > 0 &&\n                  <span className='error'>{errors.vendor_id}</span>}\n              </div>\n            </div>\n            <div class=\"sc-input\">\n              <label class=\"sc-label\">Booking Date</label>\n              <div class=\"sc-select-wrap\">\n              <input type=\"text\" class=\"sc-custom-form\" value={moment(this.state.booking_time).format('DD/MM/YYYY')}  />\n              </div>\n            </div>\n\n          </div>\n          </>\n  }\n          <div class=\"card-by-card\">\n            <div class=\"card-left card-w-70\">\n              <div class=\"sc-input-wrap sc-bg-gray\">\n                <label class=\"sc-label\">Date & Time</label>\n                <div class=\"sc-input\">\n                  <div class=\"one-row-by-two\">\n                    <div class=\"sc-input-col\">\n                      <label class=\"sc-label\">Check-In Date</label>\n                      <Datetime dateFormat={true} input={false} open={true}  isValidDate={this.state.disablePastDt}  value={this.state.checkin} onChange={this._onInputChangeIn} timeFormat={false} />\n\n\n                    </div>\n                    <div class=\"sc-input-col\">\n                      <label class=\"sc-label\">Check-Out Date</label>\n                      <Datetime dateFormat={true} input={false} open={true}  isValidDate={this.state.disablePastDts} value={this.state.checkout} onChange={this._onInputChangeOut} timeFormat={false} />\n\n                    </div>\n                  </div>\n                  </div>\n                  <div class=\"sc-input\">\n                  <div class=\"one-row-by-two\">\n                    <div class=\"sc-input-col\">\n                      <label class=\"sc-label\">Check-In Time</label>\n                      <Datetime dateFormat={false} input={false} open={true}    value={this.state.timein} onChange={this._onInputChangeTimein} timeFormat={true} />\n\n                    </div>\n                    <div class=\"sc-input-col\">\n                      <label class=\"sc-label\">Check-Out Time</label>\n                      <Datetime dateFormat={false} input={false} open={true} value={this.state.timeout} onChange={this._onInputChangeTimeout} timeFormat={true} />\n\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"dc-header\">\n                <div class=\"dch-left\">\n                  <h3 class=\"dc-head\">Payment Mode</h3>\n                </div>\n                <div class=\"dch-right toggle-btn\">\n                  {this.state.payment_mode==\"Cash\"?\n                  <>\n                  <button type=\"button\" class=\"pp-custom-btn\">Cash</button>\n                  <button type=\"button\" class=\"pp-custom-btn pp-deactive\" onClick={() => this.onChangeEdit('Card')}>Card</button>\n                  </>\n                  :\n                  <>\n                  <button type=\"button\" class=\"pp-custom-btn pp-deactive\" onClick={() => this.onChangeEdit('Cash')}>Cash</button>\n                  <button type=\"button\" class=\"pp-custom-btn\" >Card</button>\n                  </>\n  }\n                </div>\n              </div>\n              <div class=\"sc-input-wrap sc-bg-gray\">\n                <div class=\"sc-input\">\n                  <div class=\"one-row-by-two\">\n                    <div class=\"sc-input-col\">\n                      <label class=\"sc-label\">Ticket ID</label>\n                      <input type=\"text\" class=\"sc-custom-form\" readOnly value={this.state.id} />\n                    </div>\n                    <div class=\"sc-input-col\">\n                      <label class=\"sc-label\">Slot No.</label>\n                      <input type=\"text\" class=\"sc-custom-form\" value={this.state.slot ? this.state.slot : ''} onChange= {this.onSlotIdChange} />\n                      <div className={this.state.slotMessage.success ? \"success\": \"error\"}>{this.state.slotMessage?.msg}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"card-right card-w-30\">\n              <div class=\"sc-bg-white\">\n                <div class=\"cpanel-header\">\n                  <h4>Billing Details</h4>\n                  <div class=\"cpanel-logo\">\n                    <img src={logo} />\n                  </div>\n                </div>\n                <div class=\"cpanel-body\">\n                  <div class=\"cpanel-row\">\n                    <div class=\"cr-left\">\n                      <p>Onsite amount charges</p>\n                    </div>\n                    <div class=\"cr-right\">\n                      <h4> {this.state.receiptData.onsite_amount ? this.state.receiptData.onsite_amount : 0}</h4>\n                    </div>\n                  </div>\n                  <div class=\"cpanel-row\">\n                    <div class=\"cr-left\">\n                      <p>Parking Charges </p>\n                      <small>\n\n                        {\n       \n                       \n\n                        this.state.receiptData.reservation_id==\"\"?\n\n                      this.state.receiptData.hours>0?\n                      <>\n\n                             {this.state.receiptData.days} days * {this.state.receiptData.carType && \n                             this.state.receiptData.carType.onsite_charges} +\n                              {this.state.receiptData.hours}hr * \n                              {this.state.receiptData.carType && this.state.receiptData.carType.regular_charges}\n                             \n </>\n                      :\n                      <>\n                      {this.state.receiptData.days} days * ${this.state.receiptData.carType && this.state.receiptData.carType.regular_charges} \n                      \n                </>:\n                \n                \n                  this.state.receiptData.hours>0?\n                  <>\n\n                         {this.state.receiptData.days} days * {this.state.receiptData.carType && \n                         this.state.receiptData.carType.onsite_charges} +\n                          {this.state.receiptData.hours}hr * \n                          {this.state.receiptData.carType && this.state.receiptData.carType.hourly_overstay_charges}\n                         \n</>\n                  :\n                  <>\n                  {this.state.receiptData.days} days * ${this.state.receiptData.carType && this.state.receiptData.carType.onsite_charges} \n                  \n            </>\n                \n                } \n                \n              \n                 </small>\n                <small> ({(this.state.receiptData.carType && this.state.receiptData.carType.type) ? ' '+this.state.receiptData.carType.type : ''} )</small>\n                    </div>\n                    <div class=\"cr-right\">\n                      <h4>{this.state.receiptData.calculated_charges ? this.state.receiptData.calculated_charges : 0}</h4>\n                    </div>\n                  </div>\n               \n\t\t\t\t\t\t\t\t\t\t<div class=\"cpanel-row\">\n                              <div class=\"cr-left\">\n                                  <p> {Math.sign(this.state.receiptData.overstay_days)==1?'Overstay charges':'Overstay charges'}\n\t\t\t\t\t\t\t\t  </p>\n                                  <small>({this.state.receiptData.overstay_days} days)</small>\n                              </div>\n                              <div class=\"cr-right\">\n                                   <h4>{this.state.receiptData.overstay_charges?this.state.receiptData.overstay_charges:0}</h4>\n                              </div>\n                          </div>\n                  <div class=\"cpanel-row\">\n                    <div class=\"cr-left\">\n                      <p>Extra Passenger Fees</p>\n                      <small>({this.state.receiptData.passengers} Passengers)</small>\n                    </div>\n                    <div class=\"cr-right\">\n                      <h4>{this.state.receiptData.extra_passenger_charges ? this.state.receiptData.extra_passenger_charges : 0}</h4>\n                    </div>\n                  </div>\n                  {this.state.receiptData.pre_booking_days>0?\n                  <div class=\"cpanel-row\">\n                    <div class=\"cr-left\">\n                      <p>Early Check-in Charges</p>\n                      <small>({this.state.receiptData.pre_booking_days} Days * ${this.state.receiptData.carType.regular_charges})</small>\n                    </div>\n                    <div class=\"cr-right\">\n                      <h4>{this.state.receiptData.pre_booking_charges ? this.state.receiptData.pre_booking_charges : 0}</h4>\n                    </div>\n                  </div>\n                  :''}\n                </div>\n                <div class=\"cpanel-footer\">\n                  <div class=\"cpanel-row cp-bg\">\n                    <div class=\"cr-left\">\n                      <p>Total amount to pay</p>\n                    </div>\n                    <div class=\"cr-right\">\n                      <h4>$ {this.state.receiptData.total_amount}</h4>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"dc-footer\">\n          <button type=\"button\" disabled={this.state.saveDisabled} onClick={this.submit} class=\"pp-custom-btn\">Save</button>\n        </div>\n      </div>\n\n    )\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  // console.log(state.loginDetails);\n  return state;\n}\n\n\nexport default connect(mapStateToProps)(ReviewCheckin);\n\n\n"],"sourceRoot":""}