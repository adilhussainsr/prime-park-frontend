{"version":3,"sources":["views/settings/upload-csv.js"],"names":["UploadCsv","props","fileSelectedHandler","e","console","log","target","files","setState","selectedFile","submit","state","message","bind","formData","FormData","append","this","_callApi","then","response","status","data","self","msg","isDisabled","setTimeout","history","push","class","type","name","onChange","className","style","color","Component","connect","loginDetails"],"mappings":"kQAOMA,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAORC,oBAAsB,SAACC,GACrBC,QAAQC,IAAIF,EAAEG,OAAOC,OAErB,EAAKC,SAAS,CAAEC,aAAcN,EAAEG,OAAOC,MAAM,KAAM,WAEjD,EAAKG,aAXP,EAAKC,MAAQ,CACTF,aAAa,KACbG,QAAQ,IAEZ,EAAKF,OAAO,EAAKA,OAAOG,KAAZ,gBANK,E,qDAqBT,IAAD,OAIGC,EAAW,IAAIC,SAGrBD,EAASE,OACP,UACAC,KAAKN,MAAMF,cAKbS,YAASJ,EAAU,iBAFF,IAGdK,MAAK,SAACC,GACL,GAAwB,MAApBA,EAASC,OACX,GAA6B,MAAzBD,EAASE,KAAKD,OAAgB,CAChC,IAAIE,EAAO,EAEX,EAAKf,SAAS,CAAEI,QAASQ,EAASE,KAAKE,IAAKC,YAAY,IACxDC,YACE,kBAAQH,EAAKtB,MAAM0B,QAAQC,KAAK,gBAChC,UAIF,EAAKpB,SAAS,CAAEI,QAASQ,EAASE,KAAKE,IAAKC,YAAY,IACxDC,YACE,kBAAM,EAAKlB,SAAS,CAAEI,QAAS,OAC/B,UAIJ,EAAKJ,SAAS,CAAEI,QAASQ,EAASI,IAAKC,YAAY,IACnDC,YACE,kBAAM,EAAKlB,SAAS,CAAEI,QAAS,OAC/B,U,+BAYZ,OAEE,qBAAKiB,MAAM,oBAAX,SACC,sBAAKA,MAAM,mBAAX,UACL,qBAAKA,MAAM,YAAX,SACA,qBAAKA,MAAM,WAAX,SACC,oBAAIA,MAAM,UAAV,4BAGD,sBAAKA,MAAM,UAAX,UACC,qBAAKA,MAAM,cAAX,SAEU,uBAAOC,KAAK,OAAOC,KAAK,SAAWC,SAAUf,KAAKf,wBAEzDe,KAAKN,MAAMC,QACT,sBAAMqB,UAAU,aAAaC,MAAO,CAAEC,MAAO,OAA7C,SACElB,KAAKN,MAAMC,UACH,e,GAxFMwB,aAwGTC,uBANf,SAAyB1B,GAEvB,OADAP,QAAQC,IAAIM,EAAM2B,cACX3B,IAIM0B,CAAyBrC","file":"static/js/47.e7279e78.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Link, NavLink } from 'react-router-dom'\nimport { connect } from 'react-redux';\nimport { _callApi } from '../../Services/baseService';\n\n\n\nclass UploadCsv extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        selectedFile:null,\n        message:''\n    }\n    this.submit=this.submit.bind(this);\n  }\n  fileSelectedHandler = (e) => {\n    console.log(e.target.files)\n  \n    this.setState({ selectedFile: e.target.files[0] }, () => {\n\n      this.submit();\n    })\n\n  // #3 Catching files that are too large on the client\n\n  \n    \n  }\n  submit() {\n\n\n     \n        const formData = new FormData();\n    \n        // Update the formData object\n        formData.append(\n          \"csvfile\",\n          this.state.selectedFile,\n        );\n      \n        var headerdata = \"\";\n  \n        _callApi(formData, 'booking/upload', headerdata)\n          .then((response) => {\n            if (response.status === 200) {\n              if (response.data.status === 200) {\n                let self = this;\n              \n                this.setState({ message: response.data.msg, isDisabled: false });\n                setTimeout(\n                  () =>   self.props.history.push('/dashboard'),\n                  2000\n                );\n\n              } else {\n                this.setState({ message: response.data.msg, isDisabled: false });\n                setTimeout(\n                  () => this.setState({ message: '' }),\n                  2000\n                );\n              }\n            } else {\n              this.setState({ message: response.msg, isDisabled: false });\n              setTimeout(\n                () => this.setState({ message: '' }),\n                2000\n              );\n            }\n          });\n      \n\n  \n  }\n\n\n  render() {\n\n    return (\n\n      <div class=\"dashboard-content\">\n       <div class=\"dc-wrap settings\">\n\t <div class=\"dc-header\">\n\t <div class=\"dch-left\">\n\t\t <h3 class=\"dc-head\">Upload CSV</h3>\n\t\t </div>\n\t </div>\n\t <div class=\"dc-body\">\n\t\t <div class=\"vendor-wrap\">\n          \n             <input type=\"file\" name=\"attach\"   onChange={this.fileSelectedHandler} />\n\t\t </div>\n     {this.state.message ?\n\t\t\t\t\t\t\t\t<span className=\"mb-3 error\" style={{ color: \"red\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.message}\n\t\t\t\t\t\t\t\t</span> : ''}\n\t </div>\n\t</div>\n       </div>\n\n    )\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  console.log(state.loginDetails);\n  return state;\n}\n\n\nexport default connect(mapStateToProps)(UploadCsv);\n\n\n"],"sourceRoot":""}