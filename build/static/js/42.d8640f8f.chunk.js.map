{"version":3,"sources":["views/reports/carmovement.js"],"names":["Carmovement","props","toggle","setState","toggleName","state","_onInputChange","e","value","target","console","log","diff","end_date","message","start_date","carmovementData","_onInputChangeEnd","moment","subtract","checkoutData","checkinData","check_in_total","check_out_total","check_out_pending","messages","startdate","this","format","enddate","data","Date","toJSON","_callApi","then","response","status","checked_out","pending_check_out","check_in","check_out","msg","report_type","pom","document","createElement","csvContent","blob","Blob","type","url","URL","createObjectURL","href","setAttribute","click","className","length","dateFormat","input","onChange","timeFormat","startDate","class","style","onClick","colspan","Object","keys","map","key","finalReport","Component","connect","loginDetails"],"mappings":"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","file":"static/js/42.d8640f8f.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux';\nimport { _callApi } from '../../Services/baseService';\nimport Datetime from 'react-datetime';\nimport \"react-datetime/css/react-datetime.css\";\nimport moment from 'moment';\nclass Carmovement extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n\t\tstart_date:moment().subtract(15,'days'),\n\t\tend_date:moment(),\n\t\tcheckoutData:{},\n\t\tcheckinData:{},\n\t\tcheck_in_total:0,\n\t\tmessage:'',\n\t\tcheck_out_total:0,\n\t\tcheck_out_pending:0,\n\t\ttoggleName:true,\n\t\tmessages:''\n\t    }\n\tthis.carmovementData();\n  }\n  carmovementData(){\n\tvar headerdata = \"\";\n\tconst startdate=moment(this.state.start_date).format('YYYY-MM-DD');\n\tconst enddate=moment(this.state.end_date).format('YYYY-MM-DD');\n\n\tvar data = {start_date: new Date(startdate + \" 00:00:00\").toJSON(), end_date: new Date(enddate + \" 23:59:59\").toJSON()};\n\tconsole.log(data)\n\tvar s = _callApi(data, 'booking/carmovement', headerdata)\n\t.then((response) => {\n\t\tif (response.status == 200) {\n\t\t\tif (response.data.status === 200) {\n\t\t\t  console.log(response.data.data)\n\t\t\t  let check_in_total=response.data.data.check_in_total\n\t\t\t  let check_out_total=response.data.data.check_out_total.checked_out;\n\t\t\t  let check_out_pending=response.data.data.check_out_total.pending_check_out\n\t\t\t  this.setState({checkinData:response.data.data.check_in,checkoutData:response.data.data.check_out,check_in_total:check_in_total,check_out_total:check_out_total,check_out_pending:check_out_pending});\n\t\t\t\n\t\t\t \n\t\t\t\n\t\t\t}\n\t\t}else{\n\t\n\t\t\tif (response.status === 400) {\n\t\t\t\tthis.setState({messages:response.msg});\n\t\t\t  }\n\t\t\t\n\t\t\t\n\t\t}\n\t})\n  }\n  toggle=()=>{\n\t\n\tthis.setState({toggleName:!this.state.toggleName})\n  }\n  _onInputChange = e => {\n\tconst value = e.target ? e.target.value : e;\n\tconsole.log(value.diff(this.state.end_date, 'days'))\n\tif(value.diff(this.state.end_date, 'days')>0){\n        this.setState({message:'Start date is always less than end date'})\n\t}else{\n\t\tthis.setState({start_date:value})\n\t\tthis.setState({message:''})\n\t\tthis.carmovementData();\n\t}\n  }\n  finalReport(report_type){\n\tvar headerdata = \"\";\n\tconst startdate = moment(this.state.start_date).format('YYYY-MM-DD');\n\tconst enddate = moment(this.state.end_date).format('YYYY-MM-DD');\n\n\tvar data = { };\nvar value_report=this.state.toggleName?\"checkin\":\"checkout\";\n\tvar s = _callApi(data, \"booking/downloadcarmovement?report_type=\"+report_type+\"&start_date=\"+new Date(startdate + \" 00:00:00\").toJSON()+\"&end_date=\"+new Date(enddate + \" 23:59:59\").toJSON(), headerdata,2)\n\t\t.then((response) => {\n\t\t\tif (response.status == 200) {\n\t\t\t\t\n\t\t\t\t\tconsole.log(response.data)\n\t\t\t\t\tvar pom = document.createElement('a');\n\t\t\t\t\tvar csvContent=response.data; //here we load our csv data \n\t\t\t\t\tvar blob = new Blob([csvContent],{type: 'text/csv;charset=utf-8;'});\n\t\t\t\t\tvar url = URL.createObjectURL(blob);\n\t\t\t\t\tpom.href = url;\n\t\t\t\t\tpom.setAttribute('download', 'carmovement.csv');\n\t\t\t\t\tpom.click();\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t})\n\t//localhost:8000/api/v1/booking/downloadrevenue?revenue_type=parking&vendor=\"+this.state.vendor_id+\"&payment_mode=\"+this.state.toggleName+\"&start_date=\"+new Date(startdate + \" 00:00:00\").toJSON()+\"&end_date=\"+new Date(enddate + \" 23:59:59\").toJSON()\n}\n  _onInputChangeEnd = e => {\n\tconst value = e.target ? e.target.value : e;\n\n\tif(value.diff(this.state.start_date, 'days')<0){\n        this.setState({message:'Start date is always less than end date'})\n\t}else{\n\t\tthis.setState({message:''})\n\t\tthis.setState({end_date:value})\n\t\tthis.carmovementData();\n\t\t//this.finalReport();\n\t}\n\t\n  }\n  render() {\n\n    return (\n\n\t\t<div className=\"dc-wrap car-movement-report\">\n\t\t<div className=\"dc-header\">\n\t\t<div className=\"dch-left\">\n\t\t\t<h3 className=\"dc-head\">Car Movement Report</h3>\n\t\t\t{this.state.messages.length > 0 &&\n                  <span className='error'>{this.state.messages}</span>}\n\t\t\t</div>\n\t\t\t<div className=\"dch-right\">\n\t\t\t   <div className=\"dch-date-fields\">\n\t\t\t   <div className=\"dch-d-from-to\">\n\t\t\t   <p className=\"dch-d-head\">From</p>\n\t\t\t  \n                    \n                      <Datetime dateFormat={true} input={true}  value={this.state.start_date} onChange={this._onInputChange} timeFormat={false} />\n\t\t\t\n                    \n\t\t\t   </div>\n\t\t\t   <div className=\"dch-d-from-to\">\n\t\t\t   <p className=\"dch-d-head\">To</p>\n\t\t\t  \n                    \n                      <Datetime dateFormat={true} input={true} startDate={this.state.start_date} value={this.state.end_date} onChange={this._onInputChangeEnd} timeFormat={false} />\n\t\t\t\n                    \n\t\t\t   </div>\n\t\t\n\t\t\t</div>\t \n\t\t\t\n\t\t</div>\n\t\n\t\t</div>\n\t\t{this.state.message.length>0?\n     <span class=\"error\" style={{'float':'right'}}>{this.state.message}</span>\n\t \n     :''}\n\t <br/>\n\t\t<div className=\"dc-body\"> \n\t\t  <div className=\"rr-wrap\">\n\t\t   <div className=\"rr-type\">\n\t\t   <ul>\n\t\t   <li onClick={this.toggle} className={this.state.toggleName?\"active\":\"\"}><span></span>Check-In</li>\n\t\t   <li onClick={this.toggle} className={this.state.toggleName?\"\":\"active\"}><span></span>Check-Out</li>\n\t\t   </ul>\n\t\t   </div>\n\t\t  </div>{this.state.toggleName?\n\t\t  <div className=\"rr-table check-in\">\n\t\t  <div className=\"dcb-table-responsive\">\n\t\t\t   <table className=\"custom-table\">\n\t\t\t\t <thead>\n\t\t\t\t   <tr>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>Car Type</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t\t\t <th colspan=\"4\"></th>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>Check-In</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t   </tr>\n\t\t\t\t </thead>\n\t\t\t\t <tbody>\n\t\t\t\t {Object.keys(this.state.checkinData).map((key)=>(\n\t\t\t\t\t <tr>\n\t\t\t\t\t <td><p>{key}</p></td>\n\t\t\t\t\t  <td colspan=\"4\"></td>\n\t\t\t\t\t <td><p>{this.state.checkinData[key]}</p></td>\n\t\t\t\t\t </tr>\n\t\t\t\t ))}\n\t\t\t\t\t\n\t\t\t\t </tbody>\n\t\t\t\t <tfoot>\n\t\t\t\t   <tr>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>All</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t\t\t  <th colspan=\"4\"></th>\n\t\t\t\t\t\t <th onClick={() => this.finalReport('checkin')}><div className=\"ct-head\">\n\t\t\t\t\t\t <a class=\"hover\">{this.state.check_in_total}</a>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t   </tr>\n\t\t\t\t </tfoot>\n\t\t\t   </table>\n\t\t\t\t </div>\n\t\t  </div>\n\t\t : <div className=\"rr-table check-out\">\n\t\t  <div className=\"dcb-table-responsive\">\n\t\t\t   <table className=\"custom-table\">\n\t\t\t\t <thead>\n\t\t\t\t   <tr>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>Car Type</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t\t\t <th colspan=\"3\"></th>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>Check-Out</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>Pending Check-Out</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t   </tr>\n\t\t\t\t </thead>\n\t\t\t\t <tbody>\n\t\t\t\t {Object.keys(this.state.checkoutData).map((key)=>(\n\t\t\t\t\t <tr>\n\t\t\t\t\t <td><p>{key}</p></td>\n\t\t\t\t\t  <td colspan=\"3\"></td>\n\t\t\t\t\t <td><p>{this.state.checkoutData[key].checked_out}</p></td>\n\t\t\t\t\t <td><p>{this.state.checkoutData[key].pending_check_out}</p></td>\n\t\t\t\t\t </tr>\n\t\t\t\t ))}\n\t\t\t\t\t\n\t\t\t\t </tbody>\n\t\t\t\t <tfoot>\n\t\t\t\t   <tr>\n\t\t\t\t\t\t <th><div className=\"ct-head\">\n\t\t\t\t\t\t <p>All</p>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t\t\t  <th colspan=\"3\"></th>\n\t\t\t\t\t\t <th onClick={() => this.finalReport('checkout')} ><div className=\"ct-head\">\n\t\t\t\t\t\t <a class=\"hover\">{this.state.check_out_total}</a>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t\t\t <th onClick={() => this.finalReport('pending')}><div className=\"ct-head\">\n\t\t\t\t\t\t <a class=\"hover\">{this.state.check_out_pending}</a>\n\t\t\t\t\t\t </div></th>\n\t\t\t\t   </tr>\n\t\t\t\t </tfoot>\n\t\t\t   </table>\n\t\t\t\t </div>\n\t\t  </div>\n  }\n\t   </div>\n\t   </div> \t\n    )\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  console.log(state.loginDetails);\n  return state;\n}\n\n\nexport default connect(mapStateToProps)(Carmovement);\n\n\n"],"sourceRoot":""}